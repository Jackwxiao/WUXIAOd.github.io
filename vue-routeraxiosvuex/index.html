<!DOCTYPE html>
<html lang="zh-CN">
  <head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noodp"/>
  <meta name="author" content="吴潇">
  <meta name="description" content="吴潇的个人网站">
  <meta name="keywords" content="吴潇,前端,程序猿">
  
  <link rel="prev" href="http://www.pigxw.top/vue%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%87%E4%BB%A4/" />
  <link rel="next" href="http://www.pigxw.top/web%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/" />
  <link rel="canonical" href="http://www.pigxw.top/vue-routeraxiosvuex/" />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
  <title>
       
       
           vue-router、axios、vuex | 小xiao潇的个人博客
       
  </title>
  <meta name="title" content="vue-router、axios、vuex | 小xiao潇的个人博客">
    
  
  <link rel="stylesheet" href="/font/iconfont.css">
  <link rel="stylesheet" href="/css/main.min.css">


  
  
 

<script type="application/ld+json">
 "@context" : "http://schema.org",
    "@type" : "BlogPosting",
    "mainEntityOfPage": {
         "@type": "WebPage",
         "@id": "http:\/\/www.pigxw.top\/"
    },
    "articleSection" : "posts",
    "name" : "vue-router、axios、vuex",
    "headline" : "vue-router、axios、vuex",
    "description" : "vue-router 路由的基本加载  安装 npm install --save vue-router 2.引用\n在router 的 index.js 中 import router from \x27vue-router\x27 Vue.use(router)  配置路由文件，并在vue实例中注入\nvar rt = new router({ routes:[{ path:\x27\/\x27, \/\/指定要跳转的路径 component: HelloWorld \/\/指定要跳转的组件 }] }) new Vue({ el: \x27#app\x27, router, components: { App }, template: \x27\x27 })  确定试图加载的位置\n\x26lt;router-view\x26gt;\x26lt;\/router-view\x26gt;  路由的跳转  \x26lt;template\x26gt; \x26lt;ul\x26gt; \x26lt;li\x26gt; \x26lt;router-link to=\x26quot;\/helloearth\x26quot;\x26gt;HELLO EARTH 33\x26lt;\/router-link\x26gt; \x26lt;\/li\x26gt; \x26lt;li\x26gt; \x26lt;router-link to=\x26quot;\/helloworld\x26quot;\x26gt;HELLO WORLD 22\x26lt;\/router-link\x26gt; \x26lt;\/li\x26gt; \x26lt;\/ul\x26gt; \x26lt;\/template\x26gt;   路由参数传递  必须在路由内加入路由的name .",
    "inLanguage" : "zh-CN",
    "author" : "吴潇",
    "creator" : "吴潇",
    "publisher": "吴潇",
    "accountablePerson" : "吴潇",
    "copyrightHolder" : "吴潇",
    "copyrightYear" : "2019",
    "datePublished": "2019-10-15 20:30:30 \x2b0900 \x2b0900",
    "dateModified" : "2019-10-15 20:30:30 \x2b0900 \x2b0900",
    "url" : "http:\/\/www.pigxw.top\/vue-routeraxiosvuex\/",
    "wordCount" : "393",
    "keywords" : [  "小xiao潇的个人博客"]
}
</script>

</head>

  


  <body class="">
    <div class="wrapper">
        <nav class="navbar">
    <div class="container">
        <div class="navbar-header header-logo">
        	<a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href="http://www.pigxw.top/">小xiao潇的个人博客</a>
        </div>
        <div class="menu navbar-right">
                
                
                <a class="menu-item" href="/search/" title="">搜索</a>
                
                <a class="menu-item" href="/" title="">首页</a>
                
                <a class="menu-item" href="/posts/" title="">文章</a>
                
                <a class="menu-item" href="/contacts/" title="">联系我</a>
                
                <a class="menu-item" href="/wechat-subscribe/" title="">订阅</a>
                
        </div>
    </div>
</nav>
<nav class="navbar-mobile" id="nav-mobile" style="display: none">
     <div class="container">
        <div class="navbar-header">
            <div>  <a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href="http://www.pigxw.top/">小xiao潇的个人博客</a></div>
            <div class="menu-toggle">
                <span></span><span></span><span></span>
            </div>
        </div>
     
          <div class="menu" id="mobile-menu">
                
                
                <a class="menu-item" href="/search/" title="">搜索</a>
                
                <a class="menu-item" href="/" title="">首页</a>
                
                <a class="menu-item" href="/posts/" title="">文章</a>
                
                <a class="menu-item" href="/contacts/" title="">联系我</a>
                
                <a class="menu-item" href="/wechat-subscribe/" title="">订阅</a>
                
        </div>
    </div>
</nav>
    	 <main class="main">
          <div class="container">
      		
<article class="post-warp" itemscope itemtype="http://schema.org/Article">
    <header class="post-header">
        <h1 class="post-title" itemprop="name headline">vue-router、axios、vuex</h1>
        <div class="post-meta">
                Written by <a itemprop="name" href="http://www.pigxw.top/" rel="author">吴潇</a> with ♥ 
                <span class="post-time">
                on <time datetime=2019-10-15 itemprop="datePublished">October 15, 2019</time>
                </span>
                in
                
        </div>
    </header>
    <div class="post-content">
        

        

        
        
     
          
          
          

          
          
          

          

<h2 id="vue-router">vue-router</h2>

<h4 id="路由的基本加载">路由的基本加载</h4>

<ol>
<li><p>安装
<code>npm install --save vue-router</code>
2.引用</p>

<pre><code>在router 的 index.js 中 import router from 'vue-router'
Vue.use(router)
</code></pre></li>

<li><p>配置路由文件，并在vue实例中注入</p>

<pre><code>var rt = new router({ 
routes:[{ 
path:'/', //指定要跳转的路径 
component: HelloWorld //指定要跳转的组件
}] 
}) 
new Vue({ 
el: '#app',
router, 
components: { App }, 
template: '' 
})
</code></pre></li>

<li><p>确定试图加载的位置</p>

<pre><code>&lt;router-view&gt;&lt;/router-view&gt;
</code></pre>

<h4 id="路由的跳转">路由的跳转</h4>

<pre><code>
&lt;template&gt;
    &lt;ul&gt;
        &lt;li&gt; 
           &lt;router-link to=&quot;/helloearth&quot;&gt;HELLO EARTH 33&lt;/router-link&gt;
        &lt;/li&gt;
        &lt;li&gt;
            &lt;router-link to=&quot;/helloworld&quot;&gt;HELLO WORLD 22&lt;/router-link&gt;
        &lt;/li&gt;
    &lt;/ul&gt;
&lt;/template&gt;

</code></pre></li>
</ol>

<h4 id="路由参数传递">路由参数传递</h4>

<ul>
<li>必须在路由内加入路由的name</li>
<li>.必须在path后加/: +传递的参数</li>
</ul>

<p>传递参数：
<router-link :to="{name：helloearth,params:{msg: xxxxx}}">
HELLO WORLD
</router-link>
读取参数：
 $route.params.msg</p>

<h2 id="axios">Axios</h2>

<h4 id="简介">简介</h4>

<p>Axios是一个基于Promise用于浏览器和nodejs的HTTP客户端，它本身具有以下特征：
* 从浏览器中创建 XMLHttpRequest
* 从node.js 发出http请求
* 支持Promise API
* 拦截请求和响应
* 转换请求和响应数据
* 取消请求
* 自动转换JSON数据
* 客户端支持防止 CSRF/XSRF</p>

<h4 id="get请求">get请求：</h4>

<ol>
<li><p>安装</p>

<pre><code>npm install axios
</code></pre></li>

<li><p>引入加载</p>

<pre><code>import axios from 'axios' 
</code></pre></li>

<li><p>将axios全局挂载到VUE原型上</p>

<pre><code>Vue.prototype.$http = axios;
</code></pre></li>

<li><p>发出请求 以cnode社区API为例子</p>

<pre><code>
&lt;template&gt;
  &lt;div class=&quot;hello&quot;&gt;
   &lt;h3&gt;这是axios项目，用来发送请求，拦截响应&lt;/h3&gt;
   &lt;button @click='getData'&gt;GET方式发送请求&lt;/button&gt;
   &lt;ul&gt;
     &lt;li v-for=&quot;item in items&quot;&gt;
       {{item.title}}
     &lt;/li&gt;
   &lt;/ul&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
Vue.prototype.$http = axios  //将axios 全局挂载到Vue原型上
import axios from 'axios' //引入加载
import Vue from 'vue'

export default {
  name: 'HelloWorld',
  data () {
    return {
      items:[]
    }
  },
  methods:{
    getData(){//请求以cnode社区API为例子
      this.$http.get('https://cnodejs.org/api/v1/topics',{
        params:{//这是参数
          page: 2,
          limit:5
        }
      })
      .then((res)=&gt;{//此处用了ES6语法，不用箭头函数下面使用this.items 会出错
        this.items = res.data.data
        console.log(this.items)
      })
      .catch((err)=&gt;{
        console.log(err)
      })
    }
  }
&lt;/script&gt;
&lt;style scoped&gt;
&lt;/style&gt;
</code></pre></li>
</ol>

<p>参数：page页码
limit 每页显示的数量</p>

<h4 id="post请求">post请求：</h4>

<p>POST传递数据有两种格式：
* form-data ？page=1&amp;limit=48</p>

<ul>
<li>x-www-form-urlencoded { page: 1,limit: 10 }</li>
</ul>

<p>在axios中，post请求接收的参数必须是form-data
qs插件—qs.stringify</p>

<pre><code>&lt;template&gt;
  &lt;div class=&quot;hello&quot;&gt;
   &lt;h3&gt;这是axios项目，用来发送请求，拦截响应&lt;/h3&gt;
   &lt;button @click='postData'&gt;post方式发送请求&lt;/button&gt;
   &lt;ul&gt;
     &lt;li v-for=&quot;item in items&quot;&gt;
       {{item.title}}
     &lt;/li&gt;
   &lt;/ul&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;

Vue.prototype.$http = axios  //将axios 全局挂载到Vue原型上
import Vue from 'vue'
import qs from 'qs'

export default {
  name: 'HelloWorld',
  data () {
    return {
      items:[]
    }
  },
  methods:{
  postData(){
      this.$http.post(url,qs.stringify({
        params:{//这里的参数必须经过qs插件使用stringify使其格式为 form-data 
        //因为在axios中，post请求接收的参数必须是 form-data
          page: 2,
          limit:5
        }
      }))
      .then((res)=&gt;{
        this.items = res.data.data
        console.log(this.items)
      })
      .catch((err)=&gt;{
        console.log(err)
      })
    }
}
&lt;/script&gt;

&lt;style scoped&gt;

&lt;/style&gt;
</code></pre>

<h2 id="vuex">Vuex</h2>

<p>用来管理状态，共享数据，在各个组件之间管理外部状态
比如说，用于在每个页面（组件）都要判断用户是否是登录状态，如果没登陆则要求登录。
创建一个状态仓库，每个组件都能共享这个状态仓库。</p>

<ol>
<li><p>父组件给子组件传递数据，首先父组件的data属性中必须得有这个数据（:msg=&ldquo;toSonMsg&rdquo;），其次子组件中必须得有一个props来接受数据(msg:{
type:String, default : &lsquo; &rsquo; })，然后在页面渲染就行了（{{msg}}）</p></li>

<li><p>子组件给父组件传递数据，在父组件模板下面的渲染的子组件中先定义一个自定义事件</p>

<pre><code>&lt;son @handle=&quot;getSonMsg&quot;&gt;&lt;/son&gt; 
</code></pre></li>
</ol>

<p>子组件模板中定义一个</p>

<pre><code>&lt;button @click=&quot;senMsgFa&quot;&gt;&lt;/button&gt;
</code></pre>

<p>在子组件还要定义一个senMsgFa方法</p>

<pre><code>methods:{
   senMsgFa:function(){
   this.$emit('handle',要传给父组件的数据)
   }
}
</code></pre>

<p>之后在子组件的data属性中定义要传给父组件的数据toFaMsg</p>

<pre><code>data:function(){
    return{
      toFaMsg:'这是子组件传给父组件的'
    }
  }
</code></pre>

<p>然后上面$emit中的第二个参数就是this.toFaMsg，也就是</p>

<pre><code>this.$emit('handle',this.toFaMsg)
</code></pre>

<p>点击按钮触发handle事件之后就会把toFaMsg传递出去，父组件中getSonMsg方法中的参数value就是传进来的toFaMsg，这时候只要把value赋值给this.fromSonMsg,然后渲染出来就行了{{fromSonMsg}}</p>

<p><strong>由上可知，子父组件之间相互可以随意传递数据，如果有”第三者“组件的诞生呢，虽然可以让第三者也成为子父组件关系，但如果组件数量逐渐增多，这种办法就不现实了，于是，用Vuex吧。</strong></p>

<h4 id="使用vuex需要安装vuex插件">使用Vuex需要安装vuex插件</h4>

<pre><code>npm install vuex
</code></pre>

<h4 id="引入vuex-并vue-use-vuex">引入vuex，并Vue.use（Vuex）</h4>

<pre><code>//在main.js中
import Vuex from 'vuex'
Vue.use(Vuex)
</code></pre>

<h4 id="创建状态仓库-store-state不能改">创建状态仓库：Store、state不能改</h4>

<pre><code>//在main.js 中
var store = new Vuex.Store({
    state:{
        num: 99
    }
})
//然后在main.js中注入store（和router类似）
</code></pre>

<h4 id="共享数据">共享数据</h4>

<p>如果每个组件都需要这个状态：那就每个组件都设置一个计算属性</p>

<pre><code> computed:{
   getNum:function(){
    return this.$store.state.num
    }
 }
</code></pre>

<p>然后再渲染出来{{getNum}}</p>

<h4 id="操作状态">操作状态</h4>

<p>main.js</p>

<pre><code>//创建状态仓库
var store = new Vuex.Store({
    state:{
      num: 99
    },
    mutations:{//定义状态改变函数
      increase(state){//ES6写法
        state.num=state.num+20
      },
      decrease:function(state){
        state.num=state.num-20
      }
    },
    actions:{
       //context 上下文对象
      decreaseActions:function(context){
        //actions中只能对mutation进行操作
        context.commit('decrease')
      }
    },
    getters:{
      getNum(state){
        return state.num &gt; 0 ? state.num : 0
      }
    }
})
</code></pre>

<ul>
<li>各组件通过this.$store.commit(&lsquo;increase&rsquo;)来直接操作state &mdash;&mdash;mutation</li>
<li>通过this.$store.dispatch(&lsquo;decrease&rsquo;)来间接操作state &mdash;&mdash;actions</li>
</ul>

<p><strong>mutation与actios的区别：</strong>
1. 参数不同：
mutation参数为state，actions参数为context
2. 调用方式不同：
前者通过：<code>this.$store.commit()</code>
后者通过：<code>this.$store.dispatch()</code>
3. 函数要求不同：
actions中可以使用异步操作，mutation中只能同步</p>

<p>vuex状态管理操作的流程：
view-&gt;actions-&gt;mutation-&gt;state-&gt;view
对state进行直接操作的是mutation，actions如果没有异步操作可以省略。</p>

<p><strong>后面优化时再单独创建store&gt;index.js文件，再把vuex相关的代码放到里面，类似vue-router</strong></p>

<hr />

<p>(笔记链接:))[<a href="https://app.yinxiang.com/fx/ecad8f59-6bcc-4d70-a722-6242379ef32c" rel="nofollow noreferrer" target="_blank">https://app.yinxiang.com/fx/ecad8f59-6bcc-4d70-a722-6242379ef32c</a>]</p>

    </div>

    <div class="post-copyright">
             
            <p class="copyright-item">
                <span>Author:</span>
                <span>吴潇 </span>
                </p>
            
           
             
            <p class="copyright-item">
                    <span>Link:</span>
                    <a href=http://www.pigxw.top/vue-routeraxiosvuex/>http://www.pigxw.top/vue-routeraxiosvuex/</span>
            </p>
            
             
            <p class="copyright-item lincese">
                本文采用<a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank">知识共享署名-非商业性使用 4.0 国际许可协议</a>进行许可
            </p>
            
    </div>

  
    <div class="post-tags">
        
        <section>
                <a href="javascript:window.history.back();">back</a></span> · 
                <span><a href="http://www.pigxw.top/">home</a></span>
        </section>
    </div>

    <div class="post-nav">
        
        <a href="http://www.pigxw.top/vue%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%87%E4%BB%A4/" class="prev" rel="prev" title="vue自定义指令"><i class="iconfont icon-left"></i>&nbsp;vue自定义指令</a>
         
        
        <a href="http://www.pigxw.top/web%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/" class="next" rel="next" title="web性能优化">web性能优化&nbsp;<i class="iconfont icon-right"></i></a>
        
    </div>

    <div class="post-comment">
          
                 
          
    </div>
</article>
          </div>
		   </main>
      <footer class="footer">
    <div class="copyright">
        &copy;
        
        <span itemprop="copyrightYear">2019 - 2020</span>
        
        <span class="with-love">
    	 <i class="iconfont icon-love"></i> 
         </span>
         
            <span class="author" itemprop="copyrightHolder"><a href="http://www.pigxw.top/">吴潇</a> | </span> 
         

         
		  <span>Powered by <a href="https://gohugo.io/" target="_blank" rel="external nofollow">Hugo</a> & <a href="https://github.com/liuzc/leaveit" target="_blank" rel="external nofollow">LeaveIt</a></span> 
    </div>
</footer>












    
    
    <script src="/js/vendor_no_gallery.min.js" async=""></script>
    
  



     </div>
  </body>
</html>
